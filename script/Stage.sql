-- phpMyAdmin SQL Dump
-- version 4.0.6
-- http://www.phpmyadmin.net
--
-- Client: localhost
-- Généré le: Mar 04 Février 2014 à 11:54
-- Version du serveur: 5.5.33
-- Version de PHP: 5.4.19

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de données: `Stage_2`
--

-- --------------------------------------------------------

--
-- Structure de la table `ENTREPRISE`
--

CREATE TABLE `ENTREPRISE` (
  `ENT_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `ENT_RAISONSOCIALE` char(100) DEFAULT NULL,
  `ENT_POINTS` decimal(4,0) DEFAULT NULL,
  `ENT_HEURES` decimal(4,0) DEFAULT NULL,
  `ENT_RUE` char(70) DEFAULT NULL,
  `ENT_CP` char(5) DEFAULT NULL,
  `ENT_VILLE` char(40) DEFAULT NULL,
  `ENT_MAIL` char(50) DEFAULT NULL,
  `ENT_TELEPHONE` char(10) DEFAULT NULL,
  `ENT_SITEWEB` char(40) DEFAULT NULL,
  PRIMARY KEY (`ENT_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `ETAT`
--

CREATE TABLE `ETAT` (
  `ETA_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `ETA_LIBELLE` char(40) DEFAULT NULL,
  PRIMARY KEY (`ETA_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `ID`
--

CREATE TABLE `ID` (
  `ENT_CODE` int(11) NOT NULL,
  `UTI_CODE` int(11) NOT NULL,
  `ROL_CODE` int(11) NOT NULL,
  PRIMARY KEY (`ENT_CODE`,`UTI_CODE`,`ROL_CODE`),
  KEY `FK_ID2` (`UTI_CODE`),
  KEY `FK_ID3` (`ROL_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Structure de la table `INCIDENT`
--

CREATE TABLE `INCIDENT` (
  `INC_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `LIB_CODE` int(11) NOT NULL,
  `UTI_CODE` int(11) NOT NULL,
  `ENT_CODE` int(11) NOT NULL,
  `ETA_CODE` int(11) NOT NULL,
  `INC_LIBELLE` char(40) DEFAULT NULL,
  `INC_DESCRIPTION` char(200) DEFAULT NULL,
  `INC_DATEDEMANDE` date DEFAULT NULL,
  `INC_DECOMPTE` decimal(4,0) DEFAULT NULL,
  `INC_VALIDATION` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`INC_CODE`),
  KEY `FK_DEMANDE` (`UTI_CODE`),
  KEY `FK_DISPOSE2` (`ETA_CODE`),
  KEY `FK_SOUMET` (`ENT_CODE`),
  KEY `FK_URGENCE` (`LIB_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `INTERVENTION`
--

CREATE TABLE `INTERVENTION` (
  `INT_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `INC_CODE` int(11) NOT NULL,
  `LIB_CODE` int(11) NOT NULL,
  `UTI_CODE` int(11) NOT NULL,
  `INT_LIBELLE` char(40) DEFAULT NULL,
  `INT_DESCRIPTION` char(200) DEFAULT NULL,
  `INT_HEUREDEB` date DEFAULT NULL,
  `INT_HEUREFIN` date DEFAULT NULL,
  `INT_DATEINTER` date DEFAULT NULL,
  PRIMARY KEY (`INT_CODE`),
  KEY `FK_DISPOSE` (`INC_CODE`),
  KEY `FK_INTERVIENT` (`UTI_CODE`),
  KEY `FK_TYPE` (`LIB_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `LIBELLE`
--

CREATE TABLE `LIBELLE` (
  `LIB_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `LIB_LIBELLE` char(40) DEFAULT NULL,
  `LIB_TYPE` char(20) DEFAULT NULL,
  PRIMARY KEY (`LIB_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `ROLE`
--

CREATE TABLE `ROLE` (
  `ROL_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `ROL_LIBELLE` char(20) DEFAULT NULL,
  PRIMARY KEY (`ROL_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `UTILISATEUR`
--

CREATE TABLE `UTILISATEUR` (
  `UTI_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `UTI_LOGIN` char(20) DEFAULT NULL,
  `UTI_PWD` char(40) DEFAULT NULL,
  `UTI_NOM` char(50) DEFAULT NULL,
  `UTI_PRENOM` char(50) DEFAULT NULL,
  `UTI_MAIL` char(50) DEFAULT NULL,
  `UTI_TELEPHONEFIXE` char(10) DEFAULT NULL,
  `UTI_TELEPHONEMOBILE` char(10) DEFAULT NULL,
  PRIMARY KEY (`UTI_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

--
-- Contraintes pour les tables exportées
--

--
-- Contraintes pour la table `ID`
--
ALTER TABLE `ID`
  ADD CONSTRAINT `FK_ID3` FOREIGN KEY (`ROL_CODE`) REFERENCES `ROLE` (`ROL_CODE`),
  ADD CONSTRAINT `FK_ID` FOREIGN KEY (`ENT_CODE`) REFERENCES `ENTREPRISE` (`ENT_CODE`),
  ADD CONSTRAINT `FK_ID2` FOREIGN KEY (`UTI_CODE`) REFERENCES `UTILISATEUR` (`UTI_CODE`);

--
-- Contraintes pour la table `INCIDENT`
--
ALTER TABLE `INCIDENT`
  ADD CONSTRAINT `FK_DEMANDE` FOREIGN KEY (`UTI_CODE`) REFERENCES `UTILISATEUR` (`UTI_CODE`),
  ADD CONSTRAINT `FK_DISPOSE2` FOREIGN KEY (`ETA_CODE`) REFERENCES `ETAT` (`ETA_CODE`),
  ADD CONSTRAINT `FK_SOUMET` FOREIGN KEY (`ENT_CODE`) REFERENCES `ENTREPRISE` (`ENT_CODE`),
  ADD CONSTRAINT `FK_URGENCE` FOREIGN KEY (`LIB_CODE`) REFERENCES `LIBELLE` (`LIB_CODE`);

--
-- Contraintes pour la table `INTERVENTION`
--
ALTER TABLE `INTERVENTION`
  ADD CONSTRAINT `FK_DISPOSE` FOREIGN KEY (`INC_CODE`) REFERENCES `INCIDENT` (`INC_CODE`),
  ADD CONSTRAINT `FK_INTERVIENT` FOREIGN KEY (`UTI_CODE`) REFERENCES `UTILISATEUR` (`UTI_CODE`),
  ADD CONSTRAINT `FK_TYPE` FOREIGN KEY (`LIB_CODE`) REFERENCES `LIBELLE` (`LIB_CODE`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
